{"ast":null,"code":"import _slicedToArray from\"/Users/vladimirgromozdin/Documents/dev/deploy-kupipodariday/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from\"react\";import{Route,useRouteMatch,useLocation,Redirect}from\"react-router-dom\";import{Collection}from\"../collection\";import{Subheader}from\"./subheader\";import{CollectionsView}from\"./collections-view\";import{CardListView}from\"./card-lists-view\";import{getLastCards,getOwnWishes,getTopCards}from\"../../utils/api\";import{findOwnedIds}from\"../../utils/functions\";import{UserContext}from\"../../utils/context\";import styles from\"./main-page.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MainPage=function MainPage(_ref){var _ref$extraClass=_ref.extraClass,extraClass=_ref$extraClass===void 0?\"\":_ref$extraClass;var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,1),user=_useContext2[0];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lastCards=_useState2[0],setLastCards=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),topCards=_useState4[0],setTopCards=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ownWishes=_useState6[0],setOwnWishes=_useState6[1];var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path,url=_useRouteMatch.url;var location=useLocation();var isLogin=!!user.id;useEffect(function(){Promise.all([getLastCards(),getTopCards(),getOwnWishes()]).then(function(_ref2){var _ref3=_slicedToArray(_ref2,3),last=_ref3[0],top=_ref3[1],ownWishes=_ref3[2];setLastCards(last);setTopCards(top);setOwnWishes(ownWishes);});},[]);var ownedTopCardsIds=findOwnedIds(ownWishes,topCards);var ownedLastCardsIds=findOwnedIds(ownWishes,lastCards);var linePath=\"\".concat(path,\"/line\");var collectionsPath=\"\".concat(path,\"/collections\");return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsx(Subheader,{path:path,location:location,isLogin:isLogin}),/*#__PURE__*/_jsx(Route,{path:linePath,render:function render(){return/*#__PURE__*/_jsx(CardListView,{lastCards:lastCards,topCards:topCards,isLogin:isLogin,ownedTopCards:ownedTopCardsIds,ownedLastCards:ownedLastCardsIds});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:collectionsPath,render:function render(){return/*#__PURE__*/_jsx(CollectionsView,{url:url,ownWishes:ownWishes});}}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/collections/:id\"),render:function render(){return/*#__PURE__*/_jsx(Collection,{});}})]});};","map":{"version":3,"sources":["/Users/vladimirgromozdin/Documents/dev/deploy-kupipodariday/frontend/src/components/main-page/main-page.jsx"],"names":["useState","useEffect","useContext","Route","useRouteMatch","useLocation","Redirect","Collection","Subheader","CollectionsView","CardListView","getLastCards","getOwnWishes","getTopCards","findOwnedIds","UserContext","styles","MainPage","extraClass","user","lastCards","setLastCards","topCards","setTopCards","ownWishes","setOwnWishes","path","url","location","isLogin","id","Promise","all","then","last","top","ownedTopCardsIds","ownedLastCardsIds","linePath","collectionsPath","content"],"mappings":"0JAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,KAAT,CAAgBC,aAAhB,CAA+BC,WAA/B,CAA4CC,QAA5C,KAA4D,kBAA5D,CAEA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAASC,eAAT,KAAgC,oBAAhC,CACA,OAASC,YAAT,KAA6B,mBAA7B,CAEA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,WAArC,KAAwD,iBAAxD,CACA,OAASC,YAAT,KAA6B,uBAA7B,CACA,OAASC,WAAT,KAA4B,qBAA5B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,C,wFAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAyB,0BAAtBC,UAAsB,CAAtBA,UAAsB,0BAAT,EAAS,iBAC/C,gBAAehB,UAAU,CAACa,WAAD,CAAzB,4CAAOI,IAAP,iBACA,cAAkCnB,QAAQ,CAAC,EAAD,CAA1C,wCAAOoB,SAAP,eAAkBC,YAAlB,eACA,eAAgCrB,QAAQ,CAAC,EAAD,CAAxC,yCAAOsB,QAAP,eAAiBC,WAAjB,eACA,eAAkCvB,QAAQ,CAAC,EAAD,CAA1C,yCAAOwB,SAAP,eAAkBC,YAAlB,eAEA,mBAAsBrB,aAAa,EAAnC,CAAQsB,IAAR,gBAAQA,IAAR,CAAcC,GAAd,gBAAcA,GAAd,CACA,GAAMC,CAAAA,QAAQ,CAAGvB,WAAW,EAA5B,CACA,GAAMwB,CAAAA,OAAO,CAAG,CAAC,CAACV,IAAI,CAACW,EAAvB,CAEA7B,SAAS,CAAC,UAAM,CACd8B,OAAO,CAACC,GAAR,CAAY,CAACrB,YAAY,EAAb,CAAiBE,WAAW,EAA5B,CAAgCD,YAAY,EAA5C,CAAZ,EAA6DqB,IAA7D,CACE,eAA4B,mCAA1BC,IAA0B,UAApBC,GAAoB,UAAfX,SAAe,UAC1BH,YAAY,CAACa,IAAD,CAAZ,CACAX,WAAW,CAACY,GAAD,CAAX,CACAV,YAAY,CAACD,SAAD,CAAZ,CACD,CALH,EAOD,CARQ,CAQN,EARM,CAAT,CAUA,GAAMY,CAAAA,gBAAgB,CAAGtB,YAAY,CAACU,SAAD,CAAYF,QAAZ,CAArC,CACA,GAAMe,CAAAA,iBAAiB,CAAGvB,YAAY,CAACU,SAAD,CAAYJ,SAAZ,CAAtC,CAEA,GAAMkB,CAAAA,QAAQ,WAAMZ,IAAN,SAAd,CACA,GAAMa,CAAAA,eAAe,WAAMb,IAAN,gBAArB,CAEA,mBACE,aAAK,SAAS,WAAKV,MAAM,CAACwB,OAAZ,aAAuBtB,UAAvB,CAAd,wBACE,KAAC,SAAD,EAAW,IAAI,CAAEQ,IAAjB,CAAuB,QAAQ,CAAEE,QAAjC,CAA2C,OAAO,CAAEC,OAApD,EADF,cAEE,KAAC,KAAD,EACE,IAAI,CAAES,QADR,CAEE,MAAM,CAAE,qCACN,KAAC,YAAD,EACE,SAAS,CAAElB,SADb,CAEE,QAAQ,CAAEE,QAFZ,CAGE,OAAO,CAAEO,OAHX,CAIE,aAAa,CAAEO,gBAJjB,CAKE,cAAc,CAAEC,iBALlB,EADM,EAFV,EAFF,cAcE,KAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAEE,eAFR,CAGE,MAAM,CAAE,qCAAM,KAAC,eAAD,EAAiB,GAAG,CAAEZ,GAAtB,CAA2B,SAAS,CAAEH,SAAtC,EAAN,EAHV,EAdF,cAmBE,KAAC,KAAD,EAAO,IAAI,WAAKE,IAAL,oBAAX,CAAwC,MAAM,CAAE,qCAAM,KAAC,UAAD,IAAN,EAAhD,EAnBF,GADF,CAuBD,CAjDM","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { Route, useRouteMatch, useLocation, Redirect } from \"react-router-dom\";\n\nimport { Collection } from \"../collection\";\nimport { Subheader } from \"./subheader\";\nimport { CollectionsView } from \"./collections-view\";\nimport { CardListView } from \"./card-lists-view\";\n\nimport { getLastCards, getOwnWishes, getTopCards } from \"../../utils/api\";\nimport { findOwnedIds } from \"../../utils/functions\";\nimport { UserContext } from \"../../utils/context\";\n\nimport styles from \"./main-page.module.css\";\n\nexport const MainPage = ({ extraClass = \"\" }) => {\n  const [user] = useContext(UserContext);\n  const [lastCards, setLastCards] = useState([]);\n  const [topCards, setTopCards] = useState([]);\n  const [ownWishes, setOwnWishes] = useState([]);\n\n  const { path, url } = useRouteMatch();\n  const location = useLocation();\n  const isLogin = !!user.id;\n\n  useEffect(() => {\n    Promise.all([getLastCards(), getTopCards(), getOwnWishes()]).then(\n      ([last, top, ownWishes]) => {\n        setLastCards(last);\n        setTopCards(top);\n        setOwnWishes(ownWishes);\n      }\n    );\n  }, []);\n\n  const ownedTopCardsIds = findOwnedIds(ownWishes, topCards);\n  const ownedLastCardsIds = findOwnedIds(ownWishes, lastCards);\n\n  const linePath = `${path}/line`;\n  const collectionsPath = `${path}/collections`;\n\n  return (\n    <div className={`${styles.content} ${extraClass}`}>\n      <Subheader path={path} location={location} isLogin={isLogin} />\n      <Route\n        path={linePath}\n        render={() => (\n          <CardListView\n            lastCards={lastCards}\n            topCards={topCards}\n            isLogin={isLogin}\n            ownedTopCards={ownedTopCardsIds}\n            ownedLastCards={ownedLastCardsIds}\n          />\n        )}\n      />\n      <Route\n        exact\n        path={collectionsPath}\n        render={() => <CollectionsView url={url} ownWishes={ownWishes} />}\n      />\n      <Route path={`${path}/collections/:id`} render={() => <Collection />} />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}