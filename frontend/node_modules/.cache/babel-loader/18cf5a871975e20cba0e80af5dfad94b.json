{"ast":null,"code":"import _slicedToArray from\"/Users/vladimirgromozdin/Documents/dev/deploy-kupipodariday/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from\"react\";import{BrowserRouter,Route,Switch,Redirect}from\"react-router-dom\";import{Header}from\"../header\";import{Footer}from\"../footer\";import{SignIn}from\"../sign-in\";import{SignUp}from\"../sign-up\";import{MainPage}from\"../main-page\";import{ProfilePage}from\"../profile-page\";import{UserPage}from\"../user-page\";import{SearchPage}from\"../search-page\";import{WishlistPage}from\"../wishlist-page\";import{GiftPage}from\"../gift-page\";import{getOwnUser}from\"../../utils/api\";import{PrivateRoute}from\"../private-route\";import{SearchBar}from\"../search-bar\";import{UserContext}from\"../../utils/context\";import styles from\"./app.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userCtx=_useState2[0],setUserCtx=_useState2[1];useEffect(function(){if(sessionStorage.getItem(\"auth_token\")){getOwnUser().then(function(res){setUserCtx(res);});}else{setUserCtx({});}},[]);return/*#__PURE__*/_jsx(\"div\",{className:styles.app,children:/*#__PURE__*/_jsx(UserContext.Provider,{value:[userCtx,setUserCtx],children:/*#__PURE__*/_jsx(ApplicationView,{})})});}var ApplicationView=function ApplicationView(){var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,1),userCtx=_useContext2[0];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState({query:\"\",hits:[]}),_useState6=_slicedToArray(_useState5,2),queryHits=_useState6[0],setQueryHits=_useState6[1];var redirectTo=userCtx&&userCtx.id?\"/gifts/line\":\"/signin\";var changeQuery=function changeQuery(e){setQuery(e.target.value);};if(!userCtx){return/*#__PURE__*/_jsx(_Fragment,{});}return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:styles.content,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/search\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(SearchPage,{query:query,queryHits:queryHits})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/gifts\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(MainPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/profile\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(ProfilePage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/users/:username\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(UserPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/wishlist\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(WishlistPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/gift/:id\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(GiftPage,{})]}),/*#__PURE__*/_jsx(Redirect,{exact:true,from:\"/\",to:redirectTo})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default App;","map":{"version":3,"sources":["/Users/vladimirgromozdin/Documents/dev/deploy-kupipodariday/frontend/src/components/app/app.js"],"names":["useState","useEffect","useContext","BrowserRouter","Route","Switch","Redirect","Header","Footer","SignIn","SignUp","MainPage","ProfilePage","UserPage","SearchPage","WishlistPage","GiftPage","getOwnUser","PrivateRoute","SearchBar","UserContext","styles","App","userCtx","setUserCtx","sessionStorage","getItem","then","res","app","ApplicationView","query","setQuery","hits","queryHits","setQueryHits","redirectTo","id","changeQuery","e","target","value","content"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport { Header } from \"../header\";\nimport { Footer } from \"../footer\";\nimport { SignIn } from \"../sign-in\";\nimport { SignUp } from \"../sign-up\";\nimport { MainPage } from \"../main-page\";\nimport { ProfilePage } from \"../profile-page\";\nimport { UserPage } from \"../user-page\";\nimport { SearchPage } from \"../search-page\";\nimport { WishlistPage } from \"../wishlist-page\";\nimport { GiftPage } from \"../gift-page\";\nimport { getOwnUser } from \"../../utils/api\";\nimport { PrivateRoute } from \"../private-route\";\nimport { SearchBar } from \"../search-bar\";\n\nimport { UserContext } from \"../../utils/context\";\n\nimport styles from \"./app.module.css\";\n\nfunction App() {\n  const [userCtx, setUserCtx] = useState(null);\n\n  useEffect(() => {\n    if (sessionStorage.getItem(\"auth_token\")) {\n      getOwnUser().then((res) => {\n        setUserCtx(res);\n      });\n    } else {\n      setUserCtx({});\n    }\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <UserContext.Provider value={[userCtx, setUserCtx]}>\n        <ApplicationView />\n      </UserContext.Provider>\n    </div>\n  );\n}\n\nconst ApplicationView = () => {\n  const [userCtx] = useContext(UserContext);\n  const [query, setQuery] = useState(\"\");\n  const [queryHits, setQueryHits] = useState({\n    query: \"\",\n    hits: [],\n  });\n\n  const redirectTo = userCtx && userCtx.id ? \"/gifts/line\" : \"/signin\";\n\n  const changeQuery = (e) => {\n    setQuery(e.target.value);\n  };\n\n  if (!userCtx) {\n    return <></>;\n  }\n\n  return (\n    <BrowserRouter>\n      <Header />\n      <main className={styles.content}>\n        <Switch>\n          <Route path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route path=\"/signup\">\n            <SignUp />\n          </Route>\n          <PrivateRoute path=\"/search\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <SearchPage query={query} queryHits={queryHits} />\n          </PrivateRoute>\n          <PrivateRoute path=\"/gifts\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <MainPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/profile\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <ProfilePage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/users/:username\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <UserPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/wishlist\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <WishlistPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/gift/:id\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <GiftPage />\n          </PrivateRoute>\n          <Redirect exact from=\"/\" to={redirectTo} />\n        </Switch>\n      </main>\n      <Footer />\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}