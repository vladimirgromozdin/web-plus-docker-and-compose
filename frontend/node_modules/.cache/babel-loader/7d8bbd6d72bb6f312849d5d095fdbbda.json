{"ast":null,"code":"var _jsxFileName = \"/Users/vladimirgromozdin/Documents/dev/kupipodariday-frontend/src/components/header/header.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useState, useContext, useRef } from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Button } from \"../ui/button/button\";\nimport { Textarea } from \"../ui\";\nimport { Modal } from \"../ui/modal/modal\";\nimport { Input } from \"../ui/input/input\";\nimport logo from \"../../images/icons/logo.svg\";\nimport giftIcon from \"../../images/icons/gift.svg\";\nimport likeIcon from \"../../images/icons/like.svg\";\nimport profileIcon from \"../../images/icons/profile.svg\";\nimport { pluckEmptyFormFields } from \"../../utils/functions\";\nimport { logoutUser, createCard } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/context\";\nimport styles from \"./header.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Header = _ref => {\n  _s();\n\n  let {\n    extraClass = \"\"\n  } = _ref;\n  const [userCtx, setUserCtx] = useContext(UserContext);\n  const [isProfilePopupOpen, setIsProfilePopupOpen] = useState(false);\n  const [isGiftPopupOpen, setIsGiftPopupOpen] = useState(false);\n  const history = useHistory();\n  const isLoggedIn = !!(userCtx !== null && userCtx !== void 0 && userCtx.id);\n\n  const onSubmit = () => {\n    if (isLoggedIn) {\n      handleGiftPopupOpen();\n    } else {\n      history.push(\"/signin\");\n    }\n  };\n\n  const handleProfilePopupOpen = () => {\n    setIsProfilePopupOpen(true);\n  };\n\n  const handleGiftPopupOpen = () => {\n    setIsGiftPopupOpen(true);\n  };\n\n  const handlePopupClose = () => {\n    isProfilePopupOpen && setIsProfilePopupOpen(false);\n    isGiftPopupOpen && setIsGiftPopupOpen(false);\n  };\n\n  const logout = () => {\n    logoutUser();\n    setUserCtx({});\n    handlePopupClose();\n    history.push({\n      pathname: \"/\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: `${styles.header} ${extraClass}`,\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      className: styles.nav,\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.logo,\n        src: logo,\n        alt: \"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(HeaderLinks, {\n      handleProfilePopupOpen: handleProfilePopupOpen,\n      userName: userCtx.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      kind: \"primary\",\n      text: `${isLoggedIn ? \"Добавить подарок\" : \"Войти в профиль\"}`,\n      onClick: onSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), isProfilePopupOpen && /*#__PURE__*/_jsxDEV(ProfileOptionsPopup, {\n      closePopup: handlePopupClose,\n      logout: logout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), isGiftPopupOpen && /*#__PURE__*/_jsxDEV(GiftAddModal, {\n      onClose: handlePopupClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"Mpudvp5Ox0ytg2V3w3MKxTvLax8=\", false, function () {\n  return [useHistory];\n});\n\n_c = Header;\n\nconst HeaderLinks = _ref2 => {\n  let {\n    handleProfilePopupOpen,\n    userName\n  } = _ref2;\n  const profileLabel = userName ? `Профиль ${userName}` : `Профиль`;\n\n  const setInactive = isActive => {\n    const inactiveClassName = `${styles.nav} ${styles.nav_inactive}`;\n    return isActive ? inactiveClassName : styles.nav;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: styles.nav_box,\n    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(NavLink, {\n        className: setInactive,\n        to: \"/gifts/line\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: giftIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u043E\\u0432.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type-main text_color_primary ml-3\",\n          children: \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(NavLink, {\n        className: setInactive,\n        to: \"/wishlist\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: likeIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043B\\u0430\\u0439\\u043A\\u0430.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type-main text_color_primary ml-3\",\n          children: \"\\u041C\\u043E\\u0439 \\u0432\\u0438\\u0448\\u043B\\u0438\\u0441\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.nav,\n        onClick: handleProfilePopupOpen,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profileIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main text_color_primary ml-3\",\n          children: profileLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = HeaderLinks;\n\nconst GiftAddModal = _ref3 => {\n  _s2();\n\n  let {\n    onClose\n  } = _ref3;\n  const history = useHistory();\n  const [giftData, setGiftData] = useState({});\n  const [valid, setValid] = useState(false);\n  const formRef = useRef(null);\n\n  const submitGift = e => {\n    e.preventDefault();\n    const plucked = pluckEmptyFormFields(giftData);\n    createCard(plucked).then(() => {\n      onClose();\n      history.replace({\n        pathname: \"/wishlist\"\n      });\n    });\n  };\n\n  const onFormChange = e => {\n    e.preventDefault();\n    const isValid = formRef.current.checkValidity();\n    setValid(isValid);\n    setGiftData({ ...giftData,\n      [e.target.name]: e.target.name === \"price\" ? parseInt(e.target.value) : e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    onClose: onClose,\n    extraClass: styles.gift_modal,\n    isCloseBtn: true,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.gift_form,\n      onSubmit: submitGift,\n      ref: formRef,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text text_type_h2 mb-16\",\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        id: 20,\n        extraClass: \"mb-12\",\n        label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\",\n        name: \"name\",\n        onChange: onFormChange,\n        placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"url\",\n        extraClass: \"mb-12\",\n        name: \"link\",\n        label: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\",\n        onChange: onFormChange,\n        placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"url\",\n        extraClass: \"mb-12\",\n        name: \"image\",\n        label: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\",\n        onChange: onFormChange,\n        placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n        name: \"description\",\n        id: 23,\n        placeholder: \"\\u041D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u0441\\u043B\\u043E\\u0432 \\u043E \\u0432\\u0430\\u0448\\u0435\\u043C \\u0436\\u0435\\u043B\\u0430\\u043D\\u0438\\u0438\",\n        label: \"\\u0420\\u0430\\u0441\\u0441\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043E \\u0432\\u0430\\u0448\\u0435\\u043C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0435\",\n        onChange: onFormChange,\n        maxLength: 1024,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"number\",\n        name: \"price\",\n        id: 24,\n        extraClass: `mb-16 ${styles.price_input}`,\n        label: \"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430 (\\u0440\\u0443\\u0431.)\",\n        onChange: onFormChange,\n        placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\",\n        required: true,\n        min: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        extraClass: styles.gift_btn,\n        text: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\",\n        kind: \"secondary\",\n        disabled: !valid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(GiftAddModal, \"8e2X5jkpiSfadLfeI80uraaLFEk=\", false, function () {\n  return [useHistory];\n});\n\n_c3 = GiftAddModal;\n\nconst ProfileOptionsPopup = _ref4 => {\n  let {\n    closePopup,\n    logout\n  } = _ref4;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    onClose: closePopup,\n    extraClass: styles.modal,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.popup,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `text text_type_button text_color_primary ${styles.popup_btn} ${styles.logout}`,\n        type: \"button\",\n        onClick: logout,\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.line\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/profile\",\n        className: `text text_type_button text_color_primary ${styles.popup_btn} ${styles.edit}`,\n        onClick: closePopup,\n        children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n};\n\n_c4 = ProfileOptionsPopup;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"HeaderLinks\");\n$RefreshReg$(_c3, \"GiftAddModal\");\n$RefreshReg$(_c4, \"ProfileOptionsPopup\");","map":{"version":3,"sources":["/Users/vladimirgromozdin/Documents/dev/kupipodariday-frontend/src/components/header/header.jsx"],"names":["useState","useContext","useRef","NavLink","useHistory","Button","Textarea","Modal","Input","logo","giftIcon","likeIcon","profileIcon","pluckEmptyFormFields","logoutUser","createCard","UserContext","styles","Header","extraClass","userCtx","setUserCtx","isProfilePopupOpen","setIsProfilePopupOpen","isGiftPopupOpen","setIsGiftPopupOpen","history","isLoggedIn","id","onSubmit","handleGiftPopupOpen","push","handleProfilePopupOpen","handlePopupClose","logout","pathname","header","nav","name","HeaderLinks","userName","profileLabel","setInactive","isActive","inactiveClassName","nav_inactive","nav_box","nav_link","GiftAddModal","onClose","giftData","setGiftData","valid","setValid","formRef","submitGift","e","preventDefault","plucked","then","replace","onFormChange","isValid","current","checkValidity","target","parseInt","value","gift_modal","gift_form","price_input","gift_btn","ProfileOptionsPopup","closePopup","modal","popup","popup_btn","line","edit"],"mappings":"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","sourcesContent":["import { useState, useContext, useRef } from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\n\nimport { Button } from \"../ui/button/button\";\nimport { Textarea } from \"../ui\";\nimport { Modal } from \"../ui/modal/modal\";\nimport { Input } from \"../ui/input/input\";\n\nimport logo from \"../../images/icons/logo.svg\";\nimport giftIcon from \"../../images/icons/gift.svg\";\nimport likeIcon from \"../../images/icons/like.svg\";\nimport profileIcon from \"../../images/icons/profile.svg\";\n\nimport { pluckEmptyFormFields } from \"../../utils/functions\";\nimport { logoutUser, createCard } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/context\";\n\nimport styles from \"./header.module.css\";\n\nexport const Header = ({ extraClass = \"\" }) => {\n  const [userCtx, setUserCtx] = useContext(UserContext);\n  const [isProfilePopupOpen, setIsProfilePopupOpen] = useState(false);\n  const [isGiftPopupOpen, setIsGiftPopupOpen] = useState(false);\n\n  const history = useHistory();\n  const isLoggedIn = !!userCtx?.id;\n\n  const onSubmit = () => {\n    if (isLoggedIn) {\n      handleGiftPopupOpen();\n    } else {\n      history.push(\"/signin\");\n    }\n  };\n\n  const handleProfilePopupOpen = () => {\n    setIsProfilePopupOpen(true);\n  };\n\n  const handleGiftPopupOpen = () => {\n    setIsGiftPopupOpen(true);\n  };\n\n  const handlePopupClose = () => {\n    isProfilePopupOpen && setIsProfilePopupOpen(false);\n    isGiftPopupOpen && setIsGiftPopupOpen(false);\n  };\n\n  const logout = () => {\n    logoutUser();\n    setUserCtx({});\n    handlePopupClose();\n    history.push({ pathname: \"/\" });\n  };\n\n  return (\n    <header className={`${styles.header} ${extraClass}`}>\n      <NavLink className={styles.nav} to=\"/\">\n        <img className={styles.logo} src={logo} alt=\"Логотип.\" />\n      </NavLink>\n      {isLoggedIn && (\n        <HeaderLinks\n          handleProfilePopupOpen={handleProfilePopupOpen}\n          userName={userCtx.name}\n        />\n      )}\n      <Button\n        type=\"button\"\n        kind=\"primary\"\n        text={`${isLoggedIn ? \"Добавить подарок\" : \"Войти в профиль\"}`}\n        onClick={onSubmit}\n      />\n      {isProfilePopupOpen && (\n        <ProfileOptionsPopup closePopup={handlePopupClose} logout={logout} />\n      )}\n      {isGiftPopupOpen && <GiftAddModal onClose={handlePopupClose} />}\n    </header>\n  );\n};\n\nconst HeaderLinks = ({ handleProfilePopupOpen, userName }) => {\n  const profileLabel = userName ? `Профиль ${userName}` : `Профиль`;\n\n  const setInactive = (isActive) => {\n    const inactiveClassName = `${styles.nav} ${styles.nav_inactive}`;\n\n    return isActive ? inactiveClassName : styles.nav;\n  };\n\n  return (\n    <ul className={styles.nav_box}>\n      <li className={styles.nav_link}>\n        <NavLink className={setInactive} to=\"/gifts/line\">\n          <img src={giftIcon} alt=\"Иконка подарков.\" />\n          <p className=\"text text_type-main text_color_primary ml-3\">Подарки</p>\n        </NavLink>\n      </li>\n      <li className={styles.nav_link}>\n        <NavLink className={setInactive} to=\"/wishlist\">\n          <img src={likeIcon} alt=\"Иконка лайка.\" />\n          <p className=\"text text_type-main text_color_primary ml-3\">\n            Мой вишлист\n          </p>\n        </NavLink>\n      </li>\n      <li className={styles.nav_link}>\n        <button className={styles.nav} onClick={handleProfilePopupOpen}>\n          <img src={profileIcon} alt=\"Иконка профиля.\" />\n          <p className=\"text text_type_main text_color_primary ml-3\">\n            {profileLabel}\n          </p>\n        </button>\n      </li>\n    </ul>\n  );\n};\n\nconst GiftAddModal = ({ onClose }) => {\n  const history = useHistory();\n  const [giftData, setGiftData] = useState({});\n  const [valid, setValid] = useState(false);\n\n  const formRef = useRef(null);\n\n  const submitGift = (e) => {\n    e.preventDefault();\n    const plucked = pluckEmptyFormFields(giftData);\n    createCard(plucked).then(() => {\n      onClose();\n      history.replace({ pathname: \"/wishlist\" });\n    });\n  };\n\n  const onFormChange = (e) => {\n    e.preventDefault();\n    const isValid = formRef.current.checkValidity();\n    setValid(isValid);\n    setGiftData({\n      ...giftData,\n      [e.target.name]:\n        e.target.name === \"price\" ? parseInt(e.target.value) : e.target.value,\n    });\n  };\n\n  return (\n    <Modal onClose={onClose} extraClass={styles.gift_modal} isCloseBtn={true}>\n      <form className={styles.gift_form} onSubmit={submitGift} ref={formRef}>\n        <h2 className=\"text text_type_h2 mb-16\">Добавить подарок</h2>\n        <Input\n          type=\"text\"\n          id={20}\n          extraClass=\"mb-12\"\n          label=\"Название подарка\"\n          name=\"name\"\n          onChange={onFormChange}\n          placeholder=\"Укажите название подарка\"\n          required\n        />\n        <Input\n          type=\"url\"\n          extraClass=\"mb-12\"\n          name=\"link\"\n          label=\"Ссылка на магазин\"\n          onChange={onFormChange}\n          placeholder=\"Укажите ссылку\"\n          required\n        />\n        <Input\n          type=\"url\"\n          extraClass=\"mb-12\"\n          name=\"image\"\n          label=\"Ссылка на изображение подарка\"\n          onChange={onFormChange}\n          placeholder=\"Укажите ссылку\"\n          required\n        />\n        <Textarea\n          name=\"description\"\n          id={23}\n          placeholder=\"Несколько слов о вашем желании\"\n          label=\"Расскажите о вашем подарке\"\n          onChange={onFormChange}\n          maxLength={1024}\n          required\n        />\n        <Input\n          type=\"number\"\n          name=\"price\"\n          id={24}\n          extraClass={`mb-16 ${styles.price_input}`}\n          label=\"Стоимость подарка (руб.)\"\n          onChange={onFormChange}\n          placeholder=\"Укажите стоимость\"\n          required\n          min={0}\n        />\n        <Button\n          type=\"submit\"\n          extraClass={styles.gift_btn}\n          text=\"Добавить подарок\"\n          kind=\"secondary\"\n          disabled={!valid}\n        />\n      </form>\n    </Modal>\n  );\n};\n\nconst ProfileOptionsPopup = ({ closePopup, logout }) => {\n  return (\n    <Modal onClose={closePopup} extraClass={styles.modal}>\n      <div className={styles.popup}>\n        <button\n          className={`text text_type_button text_color_primary ${styles.popup_btn} ${styles.logout}`}\n          type=\"button\"\n          onClick={logout}\n        >\n          Выйти из профиля\n        </button>\n        <div className={styles.line} />\n        <NavLink\n          to=\"/profile\"\n          className={`text text_type_button text_color_primary ${styles.popup_btn} ${styles.edit}`}\n          onClick={closePopup}\n        >\n          Редактировать профиль\n        </NavLink>\n      </div>\n    </Modal>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}